import{C as f,B as _,a as h,L as v,p as S,b as B,c as C}from"./index-AE0sWP_c.js";import{r as n,c,o as k,a as u,b as l,d as x,e as A,u as P,F as L}from"./index-IzLOKglm.js";const V={key:0,style:{opacity:".7","margin-top":".25rem"}},E={__name:"TopProducts",props:{topN:{type:Number,default:5}},setup(p){f.register(_,h,v,S,B);const m=p;function t(o,r="[]"){try{return JSON.parse(localStorage.getItem(o)||r)}catch{return JSON.parse(r)}}const s=n([]),a=n([]),d=c(()=>(a.value||[]).some(o=>Number(o)>0)),i=c(()=>({labels:s.value,datasets:[{label:"PreÃ§o",data:a.value,backgroundColor:"rgba(25,135,84,0.5)",borderColor:"#198754",borderWidth:1}]})),g={indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{callback:o=>(Number(o)||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}};function b(){const o=t("produtos");if(Array.isArray(o)&&o.length)return o.map(e=>({nome:e.nome||e.nomeProduto||"Produto",preco:Number(e.preco)||Number(e.precoVenda)||0}));const r=t("estoque");return Array.isArray(r)&&r.length?r.map(e=>({nome:e.nome||e.nomeProduto||"Produto",preco:Number(e.preco)||Number(e.precoVenda)||0})):[]}function y(){const r=b().slice().sort((e,N)=>(N.preco||0)-(e.preco||0)).slice(0,m.topN);s.value=r.map(e=>e.nome),a.value=r.map(e=>e.preco||0)}return k(y),(o,r)=>(l(),u(L,null,[x(P(C),{data:i.value,options:g},null,8,["data"]),d.value?A("",!0):(l(),u("div",V,"Sem dados de produtos para exibir."))],64))}};export{E as _};
