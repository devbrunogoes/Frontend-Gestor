import{y as C,_ as T,r as d,z as x,o as U,a as n,b as s,f as e,e as h,B as N,t as i,F as A,g as D,w as S,m as p,v as b,C as I,n as j}from"./index-IzLOKglm.js";import{B as P,a as z}from"./BaseError-DNv4Myx8.js";/* empty css                                                                  */async function J(){return await C("/products/suppliers")}async function $(u){return await C("/products/suppliers",{method:"POST",body:JSON.stringify(u)})}async function q(u,c){return await C(`/products/suppliers/${u}`,{method:"PUT",body:JSON.stringify(c)})}async function L(u){return await C(`/products/suppliers/${u}`,{method:"DELETE"}),!0}const O={class:"content-area suppliers-view"},G={key:0,class:"summary-banner"},H={class:"summary-item"},K={class:"summary-value"},Q={key:3,class:"table-card"},R={key:0,class:"empty-state"},W={key:1,class:"data-table suppliers-table"},X={"data-label":"ID"},Y={"data-label":"Nome"},Z={class:"cell-main"},ee={key:0,class:"cell-muted"},te={"data-label":"CNPJ"},oe={"data-label":"Contato"},ae={"data-label":"Telefone"},le={"data-label":"E-mail",class:"cell-email"},se=["href"],ne={key:1},ie={"data-label":"Status"},re={"data-label":"Ações",class:"table-actions"},de={class:"action-buttons"},ue=["onClick"],ce=["onClick"],me={class:"modal-dialog"},pe={class:"modal-content"},ve={class:"modal-header"},fe={class:"modal-body"},be={class:"form-grid"},ye={class:"form-group form-group-large"},ge={class:"form-group"},_e={class:"form-group"},ke={class:"form-group"},he={class:"form-group form-group-large"},Ce={class:"form-group"},we={key:0,class:"alert alert-error"},Ee={key:1,class:"alert alert-success"},Ne={__name:"FornecedoresView",setup(u){const c=d([]),y=d(!1),v=d(""),g=d(!1),f=d(null),o=x({nome:"",cnpj:"",contato:"",telefone:"",email:"",active:!0}),r=d(""),m=d("");function w(){o.nome="",o.cnpj="",o.contato="",o.telefone="",o.email="",o.active=!0,f.value=null,r.value="",m.value=""}function E(){w(),g.value=!0}function V(l){f.value=l.id,o.nome=l.nome||"",o.cnpj=l.cnpj||"",o.contato=l.contato||"",o.telefone=l.telefone||"",o.email=l.email||"",o.active=l.active!==!1,r.value="",m.value="",g.value=!0}function _(){g.value=!1}async function k(){y.value=!0,v.value="";try{c.value=await J()}catch(l){v.value=(l==null?void 0:l.message)||"Erro ao carregar fornecedores"}finally{y.value=!1}}async function F(){if(r.value="",m.value="",!o.nome){r.value="Nome é obrigatório.";return}const l={nome:o.nome,cnpj:o.cnpj,contato:o.contato,telefone:o.telefone,email:o.email,active:!!o.active};try{f.value?await q(f.value,l):await $(l),m.value="Fornecedor salvo.",_(),w(),await k()}catch(t){r.value=(t==null?void 0:t.message)||"Erro ao salvar"}}async function B(l){if(confirm("Confirma excluir o fornecedor #"+l.id+"?"))try{await L(l.id),await k()}catch(t){r.value=(t==null?void 0:t.message)||"Erro ao excluir"}}return U(async()=>{await k()}),(l,t)=>(s(),n("section",O,[e("header",{class:"page-header suppliers-header"},[t[7]||(t[7]=e("div",{class:"header-copy"},[e("h2",null,"Fornecedores"),e("p",null,"Mantenha dados de contato sempre à mão para agilizar negociações e compras.")],-1)),e("button",{class:"btn btn-primary header-action",type:"button",onClick:E},[...t[6]||(t[6]=[e("i",{class:"fa-solid fa-plus"},null,-1),e("span",null,"Novo fornecedor",-1)])])]),!y.value&&!v.value?(s(),n("div",G,[e("div",H,[t[8]||(t[8]=e("span",{class:"summary-label"},"Total de fornecedores",-1)),e("strong",K,i(c.value.length),1)]),t[9]||(t[9]=e("div",{class:"summary-hint"}," Atualize contatos sempre que algum dado mudar para evitar atrasos em pedidos. ",-1))])):h("",!0),v.value?(s(),N(P,{key:1,message:v.value,retry:k},null,8,["message"])):y.value?(s(),N(z,{key:2,message:"Carregando fornecedores…"})):(s(),n("div",Q,[c.value.length?(s(),n("table",W,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"CNPJ"),e("th",null,"Contato"),e("th",null,"Telefone"),e("th",null,"E-mail"),e("th",null,"Status"),e("th",{class:"table-actions"},"Ações")])],-1)),e("tbody",null,[(s(!0),n(A,null,D(c.value,a=>(s(),n("tr",{key:a.id},[e("td",X,"#"+i(a.id),1),e("td",Y,[e("div",Z,[e("strong",null,i(a.nome),1),a.contato?(s(),n("small",ee,"Contato principal: "+i(a.contato),1)):h("",!0)])]),e("td",te,i(a.cnpj||"—"),1),e("td",oe,i(a.contato||"—"),1),e("td",ae,i(a.telefone||"—"),1),e("td",le,[a.email?(s(),n("a",{key:0,href:`mailto:${a.email}`},i(a.email),9,se)):(s(),n("span",ne,"—"))]),e("td",ie,[e("span",{class:j(["status-pill",a.active!==!1?"status-active":"status-inactive"])},i(a.active!==!1?"Ativo":"Inativo"),3)]),e("td",re,[e("div",de,[e("button",{class:"btn-icon",type:"button",onClick:M=>V(a),title:"Editar fornecedor"},[...t[14]||(t[14]=[e("i",{class:"fa-solid fa-pen"},null,-1)])],8,ue),e("button",{class:"btn-icon danger",type:"button",onClick:M=>B(a),title:"Excluir fornecedor"},[...t[15]||(t[15]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,ce)])])]))),128))])])):(s(),n("div",R,[t[11]||(t[11]=e("i",{class:"fa-solid fa-truck"},null,-1)),t[12]||(t[12]=e("h3",null,"Nenhum fornecedor cadastrado",-1)),t[13]||(t[13]=e("p",null,"Clique em “Novo fornecedor” para adicionar seus parceiros comerciais.",-1)),e("button",{class:"btn btn-primary",type:"button",onClick:E},[...t[10]||(t[10]=[e("i",{class:"fa-solid fa-plus"},null,-1),e("span",null,"Adicionar primeiro fornecedor",-1)])])]))])),e("div",{class:j(["modal",{show:g.value}]),role:"dialog","aria-hidden":"true",onClick:S(_,["self"])},[e("div",me,[e("div",pe,[e("div",ve,[e("div",null,[e("h3",null,i(f.value?"Editar fornecedor":"Novo fornecedor"),1),t[17]||(t[17]=e("p",{class:"modal-subtitle"}," Preencha os dados básicos para manter o histórico de compras organizado. ",-1))]),e("button",{type:"button",class:"btn-close",onClick:_,"aria-label":"Fechar"},[...t[18]||(t[18]=[e("i",{class:"fa-solid fa-times"},null,-1)])])]),e("form",{onSubmit:S(F,["prevent"])},[e("div",fe,[e("div",be,[e("div",ye,[t[19]||(t[19]=e("label",{for:"nome"},"Nome",-1)),p(e("input",{id:"nome",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>o.nome=a),required:""},null,512),[[b,o.nome,void 0,{trim:!0}]])]),e("div",ge,[t[20]||(t[20]=e("label",{for:"cnpj"},"CNPJ",-1)),p(e("input",{id:"cnpj",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>o.cnpj=a)},null,512),[[b,o.cnpj,void 0,{trim:!0}]])]),e("div",_e,[t[21]||(t[21]=e("label",{for:"contato"},"Contato",-1)),p(e("input",{id:"contato",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>o.contato=a)},null,512),[[b,o.contato,void 0,{trim:!0}]])]),e("div",ke,[t[22]||(t[22]=e("label",{for:"telefone"},"Telefone",-1)),p(e("input",{id:"telefone",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=a=>o.telefone=a)},null,512),[[b,o.telefone,void 0,{trim:!0}]])]),e("div",he,[t[23]||(t[23]=e("label",{for:"email"},"E-mail",-1)),p(e("input",{id:"email",type:"email",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>o.email=a)},null,512),[[b,o.email,void 0,{trim:!0}]])]),e("div",Ce,[t[25]||(t[25]=e("label",{for:"ativo"},"Status",-1)),p(e("select",{id:"ativo",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=a=>o.active=a)},[...t[24]||(t[24]=[e("option",{value:!0},"Ativo",-1),e("option",{value:!1},"Inativo",-1)])],512),[[I,o.active]])])]),r.value?(s(),n("div",we,i(r.value),1)):h("",!0),m.value?(s(),n("div",Ee,i(m.value),1)):h("",!0)]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:_},"Cancelar"),t[26]||(t[26]=e("button",{type:"submit",class:"btn btn-success"},"Salvar fornecedor",-1))])],32)])])],2)]))}},Fe=T(Ne,[["__scopeId","data-v-d06e7a07"]]);export{Fe as default};
